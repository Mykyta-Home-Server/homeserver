---
title: Introduction
description: Welcome to the Home Server documentation - A comprehensive guide to building a self-hosted media and automation platform
---

import { Card, CardGrid, Aside } from '@astrojs/starlight/components';

Welcome to the **Home Server** documentation! This project is a personal learning journey to build a comprehensive home server with AI-powered natural language automation.

## System Architecture

The entire infrastructure runs through a secure Cloudflare Tunnel with **zero exposed ports** on the home network.

```mermaid
flowchart TB
    subgraph Internet
        User([ğŸ‘¤ User])
        CF[â˜ï¸ Cloudflare<br/>DNS + DDoS Protection]
    end

    subgraph HomeServer["ğŸ  Home Server"]
        subgraph Tunnel["Cloudflare Tunnel"]
            CFD[cloudflared]
        end

        subgraph Proxy["Reverse Proxy"]
            Caddy[ğŸ”’ Caddy<br/>TLS Termination]
        end

        subgraph Auth["Authentication"]
            Authelia[ğŸ›¡ï¸ Authelia SSO]
            LDAP[(OpenLDAP)]
            PG[(PostgreSQL)]
            Redis[(Redis)]
        end

        subgraph Media["Media Stack"]
            JF[ğŸ“º Jellyfin]
            JS[ğŸ¬ Jellyseerr]
            Radarr[ğŸ¥ Radarr]
            Sonarr[ğŸ“º Sonarr]
            Prowlarr[ğŸ” Prowlarr]
            QB[â¬‡ï¸ qBittorrent]
            Bazarr[ğŸ’¬ Bazarr]
        end

        subgraph Monitoring["Monitoring"]
            Grafana[ğŸ“Š Grafana]
            Loki[ğŸ“ Loki]
            Promtail[ğŸ“‹ Promtail]
        end
    end

    User -->|HTTPS| CF
    CF -->|Encrypted Tunnel| CFD
    CFD --> Caddy
    Caddy --> Authelia
    Authelia --> LDAP
    Authelia --> PG
    Authelia --> Redis
    Caddy --> JF
    Caddy --> JS
    Caddy --> Grafana
    Caddy --> Radarr
    Caddy --> Sonarr

    style CF fill:#f6821f,color:#fff
    style Caddy fill:#00a86b,color:#fff
    style Authelia fill:#1a73e8,color:#fff
    style JF fill:#00a4dc,color:#fff
    style Grafana fill:#f46800,color:#fff
```

## Current Infrastructure

The server currently runs **24 containers** across multiple service categories:

<CardGrid>
  <Card title="Infrastructure" icon="setting">
    Caddy reverse proxy with Cloudflare Tunnel for zero-trust networking
  </Card>
  <Card title="Authentication" icon="shield">
    Authelia SSO with LDAP backend, PostgreSQL, and Redis
  </Card>
  <Card title="Media Stack" icon="star">
    Complete *arr suite: Jellyfin, Sonarr, Radarr, Prowlarr, Jellyseerr, qBittorrent, Bazarr
  </Card>
  <Card title="Monitoring" icon="laptop">
    Grafana, Loki, and Promtail for centralized logging
  </Card>
</CardGrid>

## Media Automation Flow

The complete workflow from requesting content to streaming:

```mermaid
flowchart LR
    subgraph Request["ğŸ“± Request"]
        User([ğŸ‘¤ User])
        JS[ğŸ¬ Jellyseerr]
    end

    subgraph Search["ğŸ” Search"]
        Radarr[ğŸ¥ Radarr]
        Sonarr[ğŸ“º Sonarr]
        Prowlarr[ğŸ” Prowlarr]
        Indexers[(Torrent<br/>Indexers)]
    end

    subgraph Download["â¬‡ï¸ Download"]
        QB[qBittorrent]
        FS[FlareSolverr]
    end

    subgraph Process["âš™ï¸ Process"]
        Import[Import &<br/>Rename]
        Bazarr[ğŸ’¬ Bazarr<br/>Subtitles]
    end

    subgraph Stream["ğŸ“º Stream"]
        JF[Jellyfin]
        Devices([ğŸ“±ğŸ’»ğŸ“º<br/>Devices])
    end

    User -->|Request Movie/TV| JS
    JS -->|Movie| Radarr
    JS -->|TV Show| Sonarr
    Radarr --> Prowlarr
    Sonarr --> Prowlarr
    Prowlarr -->|Search| Indexers
    Indexers -->|Results| Prowlarr
    Prowlarr -->|Best Match| Radarr
    Prowlarr -->|Best Match| Sonarr
    Radarr -->|Download| QB
    Sonarr -->|Download| QB
    FS -.->|Cloudflare Bypass| Prowlarr
    QB -->|Complete| Import
    Import --> Bazarr
    Bazarr -->|Add Subtitles| JF
    JF --> Devices

    style JS fill:#1a73e8,color:#fff
    style JF fill:#00a4dc,color:#fff
    style QB fill:#2e7d32,color:#fff
```

## Authentication Flow

Single Sign-On across all services using LDAP:

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ User
    participant Browser as ğŸŒ Browser
    participant Caddy as ğŸ”’ Caddy
    participant Authelia as ğŸ›¡ï¸ Authelia
    participant LDAP as ğŸ“ LDAP
    participant Service as ğŸ“º Service

    User->>Browser: Access service.domain.com
    Browser->>Caddy: HTTPS Request
    Caddy->>Authelia: Forward Auth Check

    alt Not Authenticated
        Authelia-->>Browser: Redirect to Login
        User->>Authelia: Enter Credentials
        Authelia->>LDAP: Validate User
        LDAP-->>Authelia: User Valid
        Authelia-->>Browser: Set Session Cookie
        Browser->>Caddy: Retry with Cookie
    end

    Caddy->>Authelia: Verify Session
    Authelia-->>Caddy: Session Valid + Headers
    Caddy->>Service: Forward Request + Auth Headers
    Service-->>Browser: Response
```

## Docker Network Architecture

Services are isolated into purpose-specific networks:

```mermaid
flowchart TB
    subgraph proxy["ğŸŒ proxy network"]
        Caddy[Caddy]
        CFD[cloudflared]
    end

    subgraph auth["ğŸ” auth network"]
        Authelia[Authelia]
        PG[(PostgreSQL)]
        Redis[(Redis)]
        LDAP[(OpenLDAP)]
    end

    subgraph media["ğŸ“º media network"]
        JF[Jellyfin]
        Radarr[Radarr]
        Sonarr[Sonarr]
        Prowlarr[Prowlarr]
        QB[qBittorrent]
        JS[Jellyseerr]
        Bazarr[Bazarr]
    end

    subgraph monitoring["ğŸ“Š monitoring network"]
        Grafana[Grafana]
        Loki[Loki]
        Promtail[Promtail]
    end

    Caddy ---|proxy| Authelia
    Caddy ---|proxy| JF
    Caddy ---|proxy| Grafana
    Caddy ---|proxy| Radarr

    Authelia ---|auth| PG
    Authelia ---|auth| Redis
    Authelia ---|auth| LDAP

    Radarr ---|media| QB
    Sonarr ---|media| QB
    Radarr ---|media| Prowlarr
    JS ---|media| JF
    Bazarr ---|media| Radarr

    Promtail ---|monitoring| Loki
    Grafana ---|monitoring| Loki

    style proxy fill:#e3f2fd
    style auth fill:#fce4ec
    style media fill:#e8f5e9
    style monitoring fill:#fff3e0
```

## Key Features

<Aside type="tip" title="Security First">
All traffic goes through Cloudflare Tunnel - **zero ports exposed** to the internet. Your home IP is never revealed.
</Aside>

- **Zero exposed ports** - All traffic through Cloudflare Tunnel
- **Single Sign-On** - Authelia with LDAP backend
- **Centralized logging** - Grafana Loki stack
- **Media automation** - Complete *arr stack with automatic subtitles
- **Infrastructure as Code** - Everything version-controlled
- **Hardlinks** - Efficient storage with instant file moves

## Quick Links

<CardGrid>
  <Card title="Quick Reference" icon="document">
    Essential commands and shortcuts for daily operations.
    [View Reference â†’](/homeserver/reference/quick-reference)
  </Card>
  <Card title="Docker Guide" icon="setting">
    Complete Docker and container management guide.
    [View Guide â†’](/homeserver/guides/docker)
  </Card>
  <Card title="Adding Services" icon="add-document">
    Step-by-step guide to deploy new services.
    [View Guide â†’](/homeserver/guides/adding-services)
  </Card>
  <Card title="Monitoring" icon="laptop">
    Logs, metrics, and observability setup.
    [View Guide â†’](/homeserver/guides/monitoring)
  </Card>
</CardGrid>

## Technology Stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| **OS** | Ubuntu Server 22.04 LTS | Stable, Docker-ready |
| **Containers** | Docker + Compose | Service isolation |
| **Reverse Proxy** | Caddy | Auto-HTTPS, simple config |
| **Tunnel** | Cloudflare Tunnel | Zero-trust networking |
| **Auth** | Authelia + LDAP | SSO across all services |
| **CI/CD** | GitHub Actions | Self-hosted runner |
