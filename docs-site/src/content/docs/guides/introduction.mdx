---
title: Introduction
description: Welcome to the Home Server documentation - A comprehensive guide to building a self-hosted media and automation platform
---

import { Card, CardGrid, Aside } from '@astrojs/starlight/components';

Welcome to the **Home Server** documentation! This project is a personal learning journey to build a comprehensive home server with AI-powered natural language automation.

## System Architecture

The entire infrastructure runs through a secure Cloudflare Tunnel with **zero exposed ports** on the home network.

```mermaid
flowchart TB
    %% Define consistent color classes
    classDef internet fill:#fef3c7,stroke:#d97706,stroke-width:2px,color:#92400e
    classDef proxy fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e40af
    classDef auth fill:#fce7f3,stroke:#db2777,stroke-width:2px,color:#9d174d
    classDef media fill:#d1fae5,stroke:#059669,stroke-width:2px,color:#065f46
    classDef monitor fill:#fed7aa,stroke:#ea580c,stroke-width:2px,color:#9a3412
    classDef database fill:#e0e7ff,stroke:#4f46e5,stroke-width:2px,color:#3730a3

    %% Internet Layer
    subgraph Internet[Internet]
        User([User])
        Cloudflare[Cloudflare DNS]
    end

    %% Proxy Layer
    subgraph Proxy[Reverse Proxy]
        direction LR
        Tunnel[cloudflared]
        Caddy[Caddy]
    end

    %% Services Grid
    subgraph Services[Application Services]
        direction TB

        subgraph Auth[Authentication]
            direction LR
            Authelia[Authelia]
            subgraph AuthData[Data Stores]
                PostgreSQL[(PostgreSQL)]
                Redis[(Redis)]
                LDAP[(OpenLDAP)]
            end
        end

        subgraph Media[Media Stack]
            direction LR
            Jellyfin[Jellyfin]
            Jellyseerr[Jellyseerr]
            Sonarr[Sonarr]
            Radarr[Radarr]
            Prowlarr[Prowlarr]
            qBittorrent[qBittorrent]
            Bazarr[Bazarr]
        end

        subgraph Monitoring[Monitoring]
            direction LR
            Grafana[Grafana]
            Loki[Loki]
            Promtail[Promtail]
        end
    end

    %% Connections - Main Flow
    User --> Cloudflare
    Cloudflare --> Tunnel
    Tunnel --> Caddy
    Caddy --> Authelia
    Caddy --> Jellyfin
    Caddy --> Grafana

    %% Auth connections
    Authelia --> PostgreSQL
    Authelia --> Redis
    Authelia --> LDAP

    %% Apply styles
    class User,Cloudflare internet
    class Tunnel,Caddy proxy
    class Authelia auth
    class Jellyfin,Jellyseerr,Sonarr,Radarr,Prowlarr,qBittorrent,Bazarr media
    class Grafana,Loki,Promtail monitor
    class PostgreSQL,Redis,LDAP database
```

## Current Infrastructure

The server currently runs **24 containers** across multiple service categories:

<CardGrid>
  <Card title="Infrastructure" icon="setting">
    Caddy reverse proxy with Cloudflare Tunnel for zero-trust networking
  </Card>
  <Card title="Authentication" icon="shield">
    Authelia SSO with LDAP backend, PostgreSQL, and Redis
  </Card>
  <Card title="Media Stack" icon="star">
    Complete *arr suite: Jellyfin, Sonarr, Radarr, Prowlarr, Jellyseerr, qBittorrent, Bazarr
  </Card>
  <Card title="Monitoring" icon="laptop">
    Grafana, Loki, and Promtail for centralized logging
  </Card>
</CardGrid>

## Media Automation Flow

The complete workflow from requesting content to streaming:

```mermaid
flowchart LR
    %% Color classes
    classDef request fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e40af
    classDef search fill:#fef3c7,stroke:#d97706,stroke-width:2px,color:#92400e
    classDef download fill:#d1fae5,stroke:#059669,stroke-width:2px,color:#065f46
    classDef process fill:#fce7f3,stroke:#db2777,stroke-width:2px,color:#9d174d
    classDef stream fill:#e0e7ff,stroke:#4f46e5,stroke-width:2px,color:#3730a3
    classDef external fill:#f3f4f6,stroke:#6b7280,stroke-width:1px,color:#374151

    %% Request Stage
    subgraph Stage1[Request]
        User([User])
        Jellyseerr[Jellyseerr]
    end

    %% Search Stage
    subgraph Stage2[Search]
        Radarr[Radarr<br/>Movies]
        Sonarr[Sonarr<br/>TV Shows]
        Prowlarr[Prowlarr]
        Indexers[(Indexers)]
    end

    %% Download Stage
    subgraph Stage3[Download]
        qBittorrent[qBittorrent]
        FlareSolverr[FlareSolverr]
    end

    %% Process Stage
    subgraph Stage4[Process]
        Import[Import &<br/>Rename]
        Bazarr[Bazarr<br/>Subtitles]
    end

    %% Stream Stage
    subgraph Stage5[Stream]
        Jellyfin[Jellyfin]
        Devices([Devices])
    end

    %% Flow connections
    User --> Jellyseerr
    Jellyseerr -->|Movie| Radarr
    Jellyseerr -->|TV| Sonarr
    Radarr --> Prowlarr
    Sonarr --> Prowlarr
    Prowlarr --> Indexers
    FlareSolverr -.->|Bypass| Prowlarr
    Radarr --> qBittorrent
    Sonarr --> qBittorrent
    qBittorrent --> Import
    Import --> Bazarr
    Bazarr --> Jellyfin
    Jellyfin --> Devices

    %% Apply styles
    class User,Jellyseerr request
    class Radarr,Sonarr,Prowlarr search
    class qBittorrent,FlareSolverr download
    class Import,Bazarr process
    class Jellyfin,Devices stream
    class Indexers external
```

## Authentication Flow

Single Sign-On across all services using LDAP:

```mermaid
sequenceDiagram
    participant U as User
    participant B as Browser
    participant C as Caddy
    participant A as Authelia
    participant L as LDAP
    participant S as Service

    U->>B: Access service.domain.com
    B->>C: HTTPS Request
    C->>A: Forward Auth Check

    alt Not Authenticated
        A-->>B: Redirect to Login
        U->>A: Enter Credentials
        A->>L: Validate User
        L-->>A: User Valid
        A-->>B: Set Session Cookie
        B->>C: Retry with Cookie
    end

    C->>A: Verify Session
    A-->>C: Session Valid
    C->>S: Forward + Auth Headers
    S-->>B: Response
```

## Docker Network Architecture

Services are isolated into purpose-specific networks:

```mermaid
flowchart TB
    %% Color classes for networks
    classDef proxyNet fill:#dbeafe,stroke:#2563eb,stroke-width:2px,color:#1e40af
    classDef authNet fill:#fce7f3,stroke:#db2777,stroke-width:2px,color:#9d174d
    classDef mediaNet fill:#d1fae5,stroke:#059669,stroke-width:2px,color:#065f46
    classDef monitorNet fill:#fed7aa,stroke:#ea580c,stroke-width:2px,color:#9a3412
    classDef database fill:#e0e7ff,stroke:#4f46e5,stroke-width:2px,color:#3730a3

    %% Proxy Network
    subgraph proxy[proxy]
        direction LR
        Caddy[Caddy]
        cloudflared[cloudflared]
    end

    %% Auth Network
    subgraph auth[auth]
        direction LR
        Authelia[Authelia]
        PostgreSQL[(PostgreSQL)]
        Redis[(Redis)]
        OpenLDAP[(OpenLDAP)]
    end

    %% Media Network
    subgraph media[media]
        direction TB
        subgraph media_row1[ ]
            direction LR
            Jellyfin[Jellyfin]
            Jellyseerr[Jellyseerr]
            Bazarr[Bazarr]
        end
        subgraph media_row2[ ]
            direction LR
            Radarr[Radarr]
            Sonarr[Sonarr]
            Prowlarr[Prowlarr]
            qBittorrent[qBittorrent]
        end
    end

    %% Monitoring Network
    subgraph monitoring[monitoring]
        direction LR
        Grafana[Grafana]
        Loki[Loki]
        Promtail[Promtail]
    end

    %% Cross-network connections via Caddy
    Caddy --> Authelia
    Caddy --> Jellyfin
    Caddy --> Grafana

    %% Internal connections
    cloudflared --> Caddy
    Authelia --> PostgreSQL
    Authelia --> Redis
    Authelia --> OpenLDAP
    Promtail --> Loki
    Loki --> Grafana

    %% Apply styles
    class Caddy,cloudflared proxyNet
    class Authelia authNet
    class Jellyfin,Jellyseerr,Radarr,Sonarr,Prowlarr,qBittorrent,Bazarr mediaNet
    class Grafana,Loki,Promtail monitorNet
    class PostgreSQL,Redis,OpenLDAP database
```

## Key Features

<Aside type="tip" title="Security First">
All traffic goes through Cloudflare Tunnel - **zero ports exposed** to the internet. Your home IP is never revealed.
</Aside>

- **Zero exposed ports** - All traffic through Cloudflare Tunnel
- **Single Sign-On** - Authelia with LDAP backend
- **Centralized logging** - Grafana Loki stack
- **Media automation** - Complete *arr stack with automatic subtitles
- **Infrastructure as Code** - Everything version-controlled
- **Hardlinks** - Efficient storage with instant file moves

## Quick Links

<CardGrid>
  <Card title="Quick Reference" icon="document">
    Essential commands and shortcuts for daily operations.
    [View Reference →](/homeserver/reference/quick-reference)
  </Card>
  <Card title="Docker Guide" icon="setting">
    Complete Docker and container management guide.
    [View Guide →](/homeserver/guides/docker)
  </Card>
  <Card title="Adding Services" icon="add-document">
    Step-by-step guide to deploy new services.
    [View Guide →](/homeserver/guides/adding-services)
  </Card>
  <Card title="Monitoring" icon="laptop">
    Logs, metrics, and observability setup.
    [View Guide →](/homeserver/guides/monitoring)
  </Card>
</CardGrid>

## Technology Stack

| Component | Technology | Purpose |
|-----------|------------|---------|
| **OS** | Ubuntu Server 22.04 LTS | Stable, Docker-ready |
| **Containers** | Docker + Compose | Service isolation |
| **Reverse Proxy** | Caddy | Auto-HTTPS, simple config |
| **Tunnel** | Cloudflare Tunnel | Zero-trust networking |
| **Auth** | Authelia + LDAP | SSO across all services |
| **CI/CD** | GitHub Actions | Self-hosted runner |
